/**
 * ChatToggle - Floating Action Button to open/close chat panel
 * Task T010
 */

import React from 'react';
import { useChatContext } from '../../context/ChatContext';
import styles from './styles.module.css';

/**
 * Chat icon SVG
 */
function ChatIcon(): React.ReactElement {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      aria-hidden="true"
    >
      <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
    </svg>
  );
}

/**
 * Close icon SVG
 */
function CloseIcon(): React.ReactElement {
  return (
    <svg
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
      aria-hidden="true"
    >
      <line x1="18" y1="6" x2="6" y2="18" />
      <line x1="6" y1="6" x2="18" y2="18" />
    </svg>
  );
}

/**
 * ChatToggle FAB component
 * 56x56px button, fixed bottom-right, toggles chat panel
 */
export default function ChatToggle(): React.ReactElement {
  const { isOpen, togglePanel } = useChatContext();

  return (
    <button
      className={`${styles.chatToggle} ${isOpen ? styles.open : ''}`}
      onClick={togglePanel}
      aria-label={isOpen ? 'Close chat' : 'Open chat'}
      aria-expanded={isOpen}
      type="button"
    >
      {isOpen ? <CloseIcon /> : <ChatIcon />}
    </button>
  );
}
