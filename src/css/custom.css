/**
 * Mobile-first custom styles for Physical AI & Humanoid Robotics textbook.
 * Optimized for readability on mobile devices with 3G performance targets.
 */

/* === Urdu Font Import === */
/* Feature: 013-urdu-translation */
@import url('https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap');

/* === Infima Variable Overrides === */
:root {
  --ifm-color-primary: #1a73e8;
  --ifm-color-primary-dark: #1765cc;
  --ifm-color-primary-darker: #155fc0;
  --ifm-color-primary-darkest: #114e9e;
  --ifm-color-primary-light: #3385eb;
  --ifm-color-primary-lighter: #4590ed;
  --ifm-color-primary-lightest: #6da8f1;
  --ifm-code-font-size: 95%;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.1);

  /* Mobile-first typography */
  --ifm-font-size-base: 16px;
  --ifm-line-height-base: 1.65;
  --ifm-heading-line-height: 1.3;

  /* Readable line length */
  --ifm-container-width: 800px;
}

[data-theme='dark'] {
  --ifm-color-primary: #4da3ff;
  --ifm-color-primary-dark: #2e91ff;
  --ifm-color-primary-darker: #1f88ff;
  --ifm-color-primary-darkest: #006de0;
  --ifm-color-primary-light: #6cb5ff;
  --ifm-color-primary-lighter: #7bbfff;
  --ifm-color-primary-lightest: #a9d6ff;
  --docusaurus-highlighted-code-line-bg: rgba(0, 0, 0, 0.3);
}

/* === Mobile-First Base Styles === */

/* Ensure minimum 44x44px tap targets for all interactive elements */
a,
button,
[role="button"],
input,
select,
textarea {
  min-height: 44px;
  min-width: 44px;
}

/* Exclude sidebar collapse button from min-size constraints */
[class*="collapseSidebarButton"],
[class*="expandButton"],
.theme-doc-sidebar-container button {
  min-height: unset;
  min-width: unset;
}

/* Links within content can be inline */
.markdown a,
article a {
  min-height: auto;
  min-width: auto;
}

/* Navigation items need proper tap targets */
.navbar__link,
.menu__link,
.pagination-nav__link {
  min-height: 44px;
  display: flex;
  align-items: center;
  padding: 8px 12px;
}

/* === Typography Optimizations === */

/* Readable prose styling */
.markdown {
  font-size: 1rem;
  line-height: 1.75;
}

.markdown h1 {
  font-size: 2rem;
  margin-top: 0;
}

.markdown h2 {
  font-size: 1.5rem;
  margin-top: 2rem;
}

.markdown h3 {
  font-size: 1.25rem;
  margin-top: 1.5rem;
}

/* Paragraph spacing for readability */
.markdown p {
  margin-bottom: 1.25rem;
}

/* === Image Styles === */

/* Responsive images with lazy loading support */
.markdown img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 1rem 0;
}

/* === Mobile Responsive Adjustments === */

@media (max-width: 768px) {
  /* Larger text on mobile for readability */
  .markdown {
    font-size: 1rem;
    line-height: 1.8;
  }

  /* Prevent horizontal scroll */
  .markdown pre {
    max-width: 100%;
    overflow-x: auto;
  }

  /* Full-width images on mobile */
  .markdown img {
    width: 100%;
    border-radius: 4px;
  }

  /* Adjust heading sizes for mobile */
  .markdown h1 {
    font-size: 1.75rem;
  }

  .markdown h2 {
    font-size: 1.35rem;
  }

  .markdown h3 {
    font-size: 1.15rem;
  }
}

/* === Code Block Styling === */

/* Ensure code blocks don't overflow */
.prism-code {
  max-width: 100%;
  overflow-x: auto;
  font-size: 0.875rem;
  border-radius: 8px;
}

/* === Pagination Navigation === */

/* Make next/previous buttons touch-friendly */
.pagination-nav {
  margin-top: 2rem;
}

.pagination-nav__link {
  padding: 1rem;
  border-radius: 8px;
  min-height: 60px;
}

/* === Chapter-Specific Styles === */

/* Readable max-width for chapter content */
.markdown {
  max-width: 720px;
}

/* Chapter section spacing */
.markdown hr {
  margin: 2.5rem 0;
  border: none;
  border-top: 1px solid var(--ifm-color-emphasis-300);
}

/* Blockquotes for key concepts */
.markdown blockquote {
  border-left: 4px solid var(--ifm-color-primary);
  padding: 0.5rem 1rem;
  margin: 1.5rem 0;
  background: var(--ifm-color-emphasis-100);
  border-radius: 0 8px 8px 0;
}

/* Lists with proper spacing */
.markdown ul,
.markdown ol {
  margin-bottom: 1.25rem;
  padding-left: 1.5rem;
}

.markdown li {
  margin-bottom: 0.5rem;
}

/* Bold text for emphasis */
.markdown strong {
  color: var(--ifm-color-primary-darkest);
}

[data-theme='dark'] .markdown strong {
  color: var(--ifm-color-primary-lightest);
}

/* Chapter conclusion styling */
.markdown p:last-of-type strong {
  font-size: 1.05rem;
}

/* === Content-Centered Layout with Edge Sidebars === */
/* Feature: 008-content-centered-layout */
/* Purpose: Sidebars at edges, content centered with constrained reading width */

/* --- Layout Variables --- */
/* Feature: 010-layout-spacing - Reduced horizontal gaps for visual cohesion */
:root {
  --layout-max-width: 1500px;         /* Maximum layout container width - groups elements on wide screens */
  --layout-content-width: 900px;      /* Content column max width (was 800px) - better density */
  --layout-sidebar-width: 260px;      /* Navigation sidebar width */
  --layout-toc-width: 240px;          /* TOC sidebar width */
  --layout-gap: 24px;                 /* Gap between elements (was 16px) - symmetric spacing */
}

/* --- Full-width layout with edge sidebars --- */
/* Note: Using attribute selectors to match Docusaurus hashed class names in production */
[class*="docsWrapper"] {
  width: 100%;
}

[class*="docRoot"] {
  display: flex;
  width: 100%;
  max-width: var(--layout-max-width); /* Constrain layout width on wide screens */
  margin: 0 auto;                     /* Center the container */
}

/* --- Left Sidebar: Let Docusaurus handle width for collapse support --- */
[class*="docSidebarContainer"] .menu {
  overflow-y: auto;
  max-height: calc(100vh - var(--ifm-navbar-height) - 2rem);
}

/* --- Main Content: Flexible, centered content --- */
[class*="docMainContainer"] {
  flex: 1;
  min-width: 0;
}

[class*="docMainContainer"] .container {
  max-width: 100%;
  padding: 0 var(--layout-gap);
}

/* Content width constraint for optimal line length */
[class*="docMainContainer"] .markdown {
  max-width: var(--layout-content-width);
}

/* --- Right TOC: Fixed width at right edge --- */
[class*="theme-doc-toc-desktop"] {
  width: var(--layout-toc-width);
  flex: 0 0 var(--layout-toc-width);
  padding-left: var(--layout-gap);
  padding-right: 0 !important;
  margin-right: 0 !important;
}

/* Remove any wrapper padding on the right */
.col[class*="col--"] {
  padding-right: 0;
}

.tableOfContents {
  position: sticky;
  top: calc(var(--ifm-navbar-height) + 1rem);
  max-height: calc(100vh - var(--ifm-navbar-height) - 2rem);
  overflow-y: auto;
  padding-right: 1rem; /* Small padding for text not touching scrollbar */
}

/* --- Responsive Breakpoints --- */

/* Desktop with TOC (997px-1199px): Compact layout */
@media (min-width: 997px) and (max-width: 1199px) {
  :root {
    --layout-sidebar-width: 220px;
    --layout-toc-width: 200px;
    --layout-gap: 20px;               /* Slightly reduced from 24px for tighter viewports */
  }
}

/* Tablet (768px-996px): TOC collapses */
@media (max-width: 996px) {
  [class*="docMainContainer"] .container {
    padding: 0 var(--ifm-spacing-horizontal);
  }

  .tableOfContents {
    width: 100%;
    position: relative;
    top: 0;
  }
}

/* Mobile (max-width: 767px): Single column */
@media (max-width: 767px) {
  [class*="docMainContainer"] .container {
    padding: 0 1rem;
  }

  [class*="docMainContainer"] .markdown {
    max-width: 100%;
  }

  [class*="docSidebarContainer"] {
    width: 100%;
    flex: none;
  }
}

/* === Print Styles === */

@media print {
  .navbar,
  .footer,
  .pagination-nav,
  .table-of-contents {
    display: none;
  }

  .markdown {
    font-size: 12pt;
    line-height: 1.5;
    max-width: none;
  }
}

/* === Urdu Translation RTL Styles === */
/* Feature: 013-urdu-translation */

.urdu-content {
  direction: rtl;
  text-align: right;
  font-family: 'Noto Nastaliq Urdu', 'Jameel Noori Nastaleeq', 'Urdu Typesetting', serif;
  line-height: 2.2;
  font-size: 1.1rem;
}

.urdu-content h1,
.urdu-content h2,
.urdu-content h3,
.urdu-content h4,
.urdu-content h5,
.urdu-content h6 {
  font-family: 'Noto Nastaliq Urdu', 'Jameel Noori Nastaleeq', serif;
  line-height: 1.8;
}

/* Keep code blocks LTR for readability */
.urdu-content pre,
.urdu-content code {
  direction: ltr;
  text-align: left;
  font-family: var(--ifm-font-family-monospace);
}

/* Keep code inline with proper direction */
.urdu-content p code,
.urdu-content li code {
  direction: ltr;
  unicode-bidi: embed;
}

/* Translation banner styling */
.translation-banner {
  background: linear-gradient(135deg, #1a73e8 0%, #4da3ff 100%);
  color: white;
  padding: 0.75rem 1rem;
  border-radius: 8px;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
}

[data-theme='dark'] .translation-banner {
  background: linear-gradient(135deg, #2e91ff 0%, #6cb5ff 100%);
}

/* Translation button group */
.translation-button-group {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
  margin-bottom: 1.5rem;
}

/* Urdu-specific list styling */
.urdu-content ul,
.urdu-content ol {
  padding-right: 1.5rem;
  padding-left: 0;
}

.urdu-content li {
  text-align: right;
}

/* Blockquotes in RTL */
.urdu-content blockquote {
  border-left: none;
  border-right: 4px solid var(--ifm-color-primary);
  padding-right: 1rem;
  padding-left: 0;
  border-radius: 8px 0 0 8px;
}
